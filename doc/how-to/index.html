<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>Draw - How-To</title>

    <style>
        /* html structure */
        html,
        body {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
        /* html structure */
        /* application structure */
        header {
            top: 0px;
            height: 40px;
            background-color: rgb(211, 222, 232);
        }
        aside {
            background-color: rgb(166, 217, 166);
        }
        aside[id=left] {
            position: absolute;
            left: 0px;
            top: 40px;
            bottom: 0px;
            width: 75px;
        }
        aside[id=right] {
            position: absolute;
            right: 0px;
            top: 40px;
            bottom: 0px;
            width: 200px;
        }
        section {
            position: absolute;
            top: 40px;
            left: 75px;
            right: 200px;
            bottom: 40px;
            background-color: rgb(234, 231, 231);
        }
        footer {
            position: absolute;
            left: 75px;
            right: 200px;
            bottom: 0px;
            height: 40px;
            background-color: rgb(239, 239, 212);
        }
        /* application structure */
        /* application components */
        canvas[id="ruller-y"] {
            position: absolute;
            height: 100%;
            width: 15px;
            background-color: rgb(204, 139, 139);
        }
        canvas[id="ruller-x"] {
            position: absolute;
            bottom: 0px;
            height: 15px;
            width: 100%;
            background-color: rgb(204, 139, 139);
        }
        div[id="paper"] {
            position: absolute;
            top: 0px;
            left: 15px;
            right: 0px;
            bottom: 15px;
            background-color: white;
        }
        div[id="paper"] > canvas[id="draw"] {
            height: 100%;
            width: 100%;
        }
        /* application components */
    </style>

    <script src="../../dist/draw-1.0.0.js"></script>

    <script>
        window.onload = function() {

            var renderer = document.getElementById("draw");

            draw.initialize({
                renderType: 'canvas',
                renderer: renderer,
                updateType: 'automatic'
            });

            drawGrid(renderer.width, renderer.height);




            function drawGrid(width, height) {

                for (xActual = 0; xActual < width; xActual += 50) {

                    draw.shape.create({
                        type: 'line',
                        x: [xActual, 0],
                        y: [xActual, height],
                        strokeColor: 'rgb(218, 222, 215)',
                        strokeWidth: .6
                    });

                    for (xInternalSub = 1; xInternalSub <= 4; xInternalSub++) {
                        // small part = 50/5 = 10px espaço entre as linhas
                        var xActualSub = Math.round(xActual + 10 * xInternalSub);

                        // como é somado + 10 (afrente) para fazer as sub-linhas
                        // verifico se não ultrapassou o width
                        if (xActualSub > width) {
                            break;
                        }

                        draw.shape.create({
                            type: 'line',
                            x: [xActualSub, 0],
                            y: [xActualSub, height],
                            strokeColor: 'rgb(218, 222, 215)',
                            strokeWidth: .3
                        });


                    }

                }

                for (yActual = 0; yActual < height; yActual += 50) {

                    draw.shape.create({
                        type: 'line',
                        x: [0, yActual],
                        y: [width, yActual],
                        strokeColor: 'rgb(218, 222, 215)',
                        strokeWidth: .6
                    });


                    // 10/20/30/40 = 4 linhas internas
                    for (yInternalSub = 1; yInternalSub <= 4; yInternalSub++) {
                        // small part = 50/5 = 10px espaço entre as linhas
                        var yActualSub = Math.round(yActual - 10 * yInternalSub);

                        // como é subtraido - 10 (atrás/acima) para fazer as sub-linhas
                        // verifico se não ultrapassou o height
                        if (yActualSub < 0) {
                            break;
                        }

                        draw.shape.create({
                            type: 'line',
                            x: [0, yActualSub],
                            y: [width, yActualSub],
                            strokeColor: 'rgb(218, 222, 215)',
                            strokeWidth: .3
                        });

                    }


                }

                draw.render.update();

            };






            draw.shape
                .create({
                    type: 'polygon',
                    x: 900,
                    y: 500,
                    radius: 70,
                    sides: 7
                })
                .create({
                    type: 'rectangle',
                    x: 150,
                    y: 150,
                    width: 100,
                    height: 100
                })
                .create({
                    type: 'line',
                    x: [50, 50],
                    y: [1600, 50]
                })
                .create({
                    type: 'line',
                    x: [100, 600],
                    y: [700, 700]
                })
                .create({
                    type: 'circle',
                    x: 1200,
                    y: 300,
                    radius: 80
                })
                .create({
                    type: 'polygon',
                    x: 600,
                    y: 500,
                    radius: 70,
                    sides: 5
                });

            draw.render.update();

            console.log(draw.shape.search());
            console.log(JSON.parse(draw.shape.search()));


            //            var canvas = document.getElementById("draw"),
            //                context = canvas.getContext("2d");
            //
            //            console.log(canvas);
            //
            //            // Cartesian coordinate system
            //            context.translate(0, canvas.height);
            //            context.scale(1, -1);
            //
            //            context.beginPath();
            //            context.arc(100, 100, 30, 0, Math.PI * 2, true);
            //            context.stroke();
        }
    </script>

</head>

<body>

    <header>
    </header>

    <aside id="left">
    </aside>

    <section>
        <canvas id="ruller-x"></canvas>
        <div id="paper">
            <canvas id="draw"></canvas>
            <!--
            <ul>
                <li></li>
                <li></li>
                <li></li>
            </ul>
-->
        </div>
        <canvas id="ruller-y"></canvas>
    </section>

    <aside id="right">
        <ul>
            <li>
                <a href="#">Camada 001</a>
            </li>
            <li>
                <a href="#">Camada 002</a>
            </li>
            <li>
                <a href="#">Camada 003</a>
            </li>
        </ul>
        <div id="debug" style="height:200px;border:1px solid red">
        </div>
    </aside>

    <footer>
    </footer>
</body>

</html>